/* Minimal clean UI + HUD */
:root{
  --bg:#0c1220; --panel:#111a2e; --text:#e8f0ff; --muted:#9fb3d9; --accent:#00ffcc;
  --good:#31d07c; --warn:#e7b416; --bad:#ff4d6d;
}

*{ box-sizing:border-box; }
html,body{ height:100%; margin:0; background:var(--bg); color:var(--text); font-family:system-ui, Segoe UI, Roboto, Helvetica, Arial, sans-serif; overflow:hidden; }
button{ border:0; background:#233357; color:var(--text); padding:.7rem 1.1rem; border-radius:12px; cursor:pointer; }
button.primary{ background:linear-gradient(135deg,#1f9ab0,#16c4a7); }
button.success{ background:linear-gradient(135deg,#2aa960,#2bd08a); }
button.secondary{ background:#21314f; }
button:disabled{ opacity:.6; cursor:not-allowed; }
input,select{ width:100%; padding:.6rem; border-radius:10px; border:1px solid #2a3b63; background:#0e1730; color:var(--text); }
label{ display:block; margin:.7rem 0; }
fieldset{ border:1px solid #2a3b63; border-radius:12px; padding:.8rem 1rem; }
legend{ padding:0 .4rem; color:var(--muted); }

.screen{ display:none; height:100%; }
.screen.visible{ display:block; }

.panel{ max-width:980px; margin:8vh auto; padding:1.2rem 1.4rem; background:var(--panel); border-radius:16px; box-shadow:0 10px 30px rgba(0,0,0,.35); }
.panel-wide{ max-width:1080px; }

.subtitle{ color:var(--muted); }
.mt{ margin-top:.8rem; }
.grid-2{ display:grid; grid-template-columns:1fr 1fr; gap:.8rem; }
.grid-3{ display:grid; grid-template-columns:1fr 1fr 1fr; gap:.8rem; }
.settings-form{ display:flex; flex-direction:column; gap:.6rem; }
.settings-form .row-right{ margin-top:.6rem; }
.row-right{ display:flex; gap:.6rem; justify-content:flex-end; }
.small{ font-size:.9rem; color:var(--muted); }

/* Game */
#game-canvas{ width:100%; height:100%; display:block; outline:none; }

#hud{ position:fixed; inset:0; pointer-events:none; padding:.6rem; }
.hud-left{ position:absolute; top:.6rem; left:.6rem; }
.hud-right{ position:absolute; top:.6rem; right:.6rem; min-width:260px; }
#hud-name{ font-weight:700; }
#hud-nen,#hud-level{ font-size:.9rem; color:var(--muted); }

.bar{ height:12px; background:#1a2744; border-radius:12px; overflow:hidden; margin:.3rem 0; }
.bar.small{ height:8px; }
.bar>span{ display:block; height:100%; width:100%; background:linear-gradient(90deg,#ff6b6b,#ff9f6b); }
.bar.alt>span{ background:linear-gradient(90deg,#47a8bd,#00ffcc); }

#hud-bottom{ position:absolute; left:0; right:0; bottom:.6rem; display:flex; justify-content:space-between; align-items:flex-end; }
#hud-message{ padding:.4rem 1rem; background:#0f1a30cc; border:1px solid #27355e; border-radius:12px; max-width:60%; }
#cooldowns{ display:flex; gap:.4rem; pointer-events:auto; }
.cd{ width:48px; height:48px; display:flex; align-items:center; justify-content:center; border-radius:10px; background:#101a2e; border:1px solid #27355e; color:#9fb3d9; position:relative; overflow:hidden; }
.cd::after{ content:""; position:absolute; inset:0; background:#0008; transform:translateY(100%); transition:transform .15s linear; }
.cd.cooling::after{ transform:translateY(var(--pct,100%)); }

.overlay{ position:fixed; inset:0; background:#0008; display:none; justify-content:center; align-items:center; z-index:10; }
.overlay.visible{ display:flex; }

.stat-row{ display:flex; justify-content:space-between; align-items:center; margin:.4rem 0; }
.stat-row .plus{ pointer-events:auto; padding:.3rem .6rem; }

/* Menu */
#screen--menu{ position:relative; overflow:hidden; }
#screen--menu .menu-bg{ position:absolute; inset:0; }
#screen--menu .menu-bg{ z-index:0; }
#menu-canvas{ width:100%; height:100%; display:block;
/* ↓ ADD: let clicks pass through the background canvas */
  pointer-events:none;
}
#screen--menu .menu-contents{
  position:relative; z-index:2; max-width:900px; margin:2.5rem auto; padding:1.25rem 1.5rem;
  background:linear-gradient(180deg,rgba(10,16,28,.65),rgba(10,16,28,.35));
  border:1px solid #223154; border-radius:16px; box-shadow:0 8px 40px rgba(0,0,0,.35); backdrop-filter:blur(4px);
/* ↓ ADD (explicit): the panel should accept clicks */
  pointer-events:auto;
}
const c = document.getElementById("menu-canvas");
if (c) c.style.pointerEvents = "none";

#screen--menu .btn-row{ display:flex; gap:.6rem; flex-wrap:wrap; margin:.4rem 0 1rem; }
#screen--menu details.small summary{ cursor:pointer; }

/* Rig screen layout */
#screen--rig .rig-layout{
  --panel-w:0px; --panel-min:260px; --panel-max:60vw; --split-w:10px;
  display:grid; grid-template-columns:1fr var(--split-w) var(--panel-w); gap:.8rem; height:100%;
}
#screen--rig .rig-canvas-wrap{ position:relative; min-width:320px; height:100%; }

/* ADD: animation panel visibility + layout */
#anim-panel{
  display: none;                 /* hidden by default; shown when .anim-open is on */
  position: absolute;
  top: 8px; right: 8px; left: 8px;
  height: 50%;                   /* requested: reduce height by ~50% of view */
  max-height: 50vh;
  padding: 10px;
  overflow: auto;
  background: rgba(8,12,18,0.85);
  border: 1px solid #223154;
  border-radius: 10px;
  z-index: 5;                    /* above canvas/gizmos, below any modals */
}

/* when the screen has .anim-open, show the panel */
#screen--rig.anim-open #anim-panel{
  display: block;
}

#rig-canvas{ width:100%; height:100%; display:block; }
.rig-resizer, .rig-panel{ display:none; }

/* Toolbar on canvas */
.rig-toolbar{
  position:absolute; left:.6rem; top:.6rem; z-index:2; display:flex; flex-direction:column; gap:.4rem;
  background:#0f1a30cc; border:1px solid #27355e; border-radius:10px; padding:.45rem .55rem; backdrop-filter:blur(2px);
}
.rig-toolbar .btns{ display:flex; g

#hud-control-dock .hud-cosmetic-card {
  flex: 1 1 220px;
}

#hud-control-dock .cosmetic-test-row {
  display: flex;
  flex-wrap: wrap;
  gap: 0.35rem;
}

#hud-control-dock .hud-cosmetic-card button {
  flex: 1 1 120px;
}
