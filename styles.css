/* Minimal clean UI + HUD */
:root{
  --bg:#0c1220; --panel:#111a2e; --text:#e8f0ff; --muted:#9fb3d9; --accent:#00ffcc;
  --good:#31d07c; --warn:#e7b416; --bad:#ff4d6d;
}

*{ box-sizing:border-box; }
html,body{ height:100%; margin:0; background:var(--bg); color:var(--text); font-family:system-ui, Segoe UI, Roboto, Helvetica, Arial, sans-serif; overflow:hidden; }
button{ border:0; background:#233357; color:var(--text); padding:.7rem 1.1rem; border-radius:12px; cursor:pointer; }
button.primary{ background:linear-gradient(135deg,#1f9ab0,#16c4a7); }
button.success{ background:linear-gradient(135deg,#2aa960,#2bd08a); }
button.secondary{ background:#21314f; }
button:disabled{ opacity:.6; cursor:not-allowed; }
input,select{ width:100%; padding:.6rem; border-radius:10px; border:1px solid #2a3b63; background:#0e1730; color:var(--text); }
label{ display:block; margin:.7rem 0; }
fieldset{ border:1px solid #2a3b63; border-radius:12px; padding:.8rem 1rem; }
legend{ padding:0 .4rem; color:var(--muted); }

.screen{ display:none; height:100%; }
.screen.visible{ display:block; }

.panel{ max-width:980px; margin:8vh auto; padding:1.2rem 1.4rem; background:var(--panel); border-radius:16px; box-shadow:0 10px 30px rgba(0,0,0,.35); }
.panel-wide{ max-width:1080px; }

.subtitle{ color:var(--muted); }
.mt{ margin-top:.8rem; }
.grid-2{ display:grid; grid-template-columns:1fr 1fr; gap:.8rem; }
.grid-3{ display:grid; grid-template-columns:1fr 1fr 1fr; gap:.8rem; }
.settings-form{ display:flex; flex-direction:column; gap:.6rem; }
.settings-form .row-right{ margin-top:.6rem; }
.row-right{ display:flex; gap:.6rem; justify-content:flex-end; }
.small{ font-size:.9rem; color:var(--muted); }

/* Character creator */
.creator-panel{ padding:1.4rem 1.6rem; }
.creator-layout{ display:grid; grid-template-columns:minmax(320px,1fr) minmax(360px,1fr); gap:1.2rem; align-items:stretch; }
.creator-preview-column{ display:flex; }
.creator-preview-card{ position:relative; flex:1; min-height:440px; background:linear-gradient(180deg,#0c1426,#080d18); border:1px solid #1e2c4b; border-radius:18px; overflow:hidden; box-shadow:0 14px 40px rgba(4,8,16,.35); }
#creator-preview-canvas{ width:100%; height:100%; display:block; }
.creator-preview-hint{ position:absolute; left:0; right:0; bottom:0; padding:.55rem .85rem; background:linear-gradient(180deg,rgba(8,13,24,0),rgba(8,13,24,0.88)); font-size:.78rem; letter-spacing:.04em; text-align:center; color:var(--muted); }
.creator-form-column{ display:flex; flex-direction:column; gap:1rem; }
.creator-header h2{ margin:0 0 .2rem; }
.creator-selectors{ display:grid; grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); gap:.75rem; }
.selector-group{ display:flex; flex-direction:column; gap:.35rem; padding:.65rem .75rem; background:rgba(15,24,42,0.75); border:1px solid #223356; border-radius:14px; box-shadow:0 6px 16px rgba(0,0,0,0.18) inset; }
.selector-group-inline{ grid-column:span 2; display:grid; grid-template-columns:repeat(auto-fit,minmax(0,1fr)); gap:.6rem; align-items:flex-start; }
.selector-group-inline .selector-field{ display:flex; flex-direction:column; gap:.35rem; }
.selector-group-inline .selector-label{ margin-bottom:0; }
.selector-group-accessories{ grid-column:1/-1; }
.selector-label{ font-size:.82rem; text-transform:uppercase; letter-spacing:.08em; color:var(--muted); }
.selector-group select{ width:100%; }
.accessory-grid{ display:flex; flex-wrap:wrap; gap:.45rem; }
.accessory-grid label{ display:flex; align-items:center; gap:.35rem; padding:.25rem .55rem; border-radius:10px; border:1px solid #25355a; background:#101a2e; cursor:pointer; transition:background .2s ease,border-color .2s ease; }
.accessory-grid input{ width:auto; }
.accessory-grid label:hover{ background:#16243f; border-color:#2f4573; }
.accessory-grid label.selected{ background:linear-gradient(135deg,rgba(30,154,176,0.4),rgba(22,196,167,0.4)); border-color:#32c5a9; color:#e8f9ff; }

@media (max-width: 1080px){
  .creator-layout{ grid-template-columns:1fr; }
  .selector-group-inline{ grid-column:1/-1; }
}

@media (max-width: 720px){
  .creator-preview-card{ min-height:360px; }
}

/* Game */
#game-canvas{ width:100%; height:100%; display:block; outline:none; }

#hud{ position:fixed; inset:0; pointer-events:none; padding:.6rem; }
.hud-left{ position:absolute; top:.6rem; left:.6rem; }
.hud-right{ position:absolute; top:.6rem; right:.6rem; min-width:260px; display:flex; flex-direction:column; gap:.55rem; align-items:stretch; }
#hud-name{ font-weight:700; }
#hud-nen,#hud-level{ font-size:.9rem; color:var(--muted); }

.bar{ height:12px; background:#1a2744; border-radius:12px; overflow:hidden; margin:.3rem 0; }
.bar.small{ height:8px; }
.bar>span{ display:block; height:100%; width:100%; background:linear-gradient(90deg,#ff6b6b,#ff9f6b); }
.bar.alt>span{ background:linear-gradient(90deg,#47a8bd,#00ffcc); }

#hud-bottom{ position:absolute; left:0; right:0; bottom:.6rem; display:grid; grid-template-columns:1fr auto 1fr; align-items:end; gap:1.5rem; pointer-events:none; padding:0 1.5rem; }
#hud-bottom-left{ justify-self:end; display:flex; flex-wrap:wrap; align-items:flex-end; justify-content:flex-end; gap:.5rem; pointer-events:auto; max-width:min(34vw,460px); }
#hud-bottom-center{ justify-self:center; display:flex; flex-direction:column; align-items:center; pointer-events:none; }
#hud-bottom-right{ justify-self:start; display:flex; align-items:flex-end; pointer-events:auto; }
#hud-message{ padding:.4rem 1rem; background:#0f1a30cc; border:1px solid #27355e; border-radius:12px; max-width:min(70vw,440px); margin:0 0 5px; text-align:center; pointer-events:none; }
#cooldowns{ display:flex; gap:.4rem; pointer-events:auto; }
.cd{ width:48px; height:48px; display:flex; align-items:center; justify-content:center; border-radius:10px; background:#101a2e; border:1px solid #27355e; color:#9fb3d9; position:relative; overflow:hidden; }
.cd::after{ content:""; position:absolute; inset:0; background:#0008; transform:translateY(100%); transition:transform .15s linear; }
.cd.cooling::after{ transform:translateY(var(--pct,100%)); }

.overlay{ position:fixed; inset:0; background:#0008; display:none; justify-content:center; align-items:center; z-index:10; }
.overlay.visible{ display:flex; }

.stat-row{ display:flex; justify-content:space-between; align-items:center; margin:.4rem 0; }
.stat-row .plus{ pointer-events:auto; padding:.3rem .6rem; }

/* Menu */
#screen--menu{ position:relative; overflow:hidden; }
#screen--menu .menu-bg{ position:absolute; inset:0; }
#screen--menu .menu-bg{ z-index:0; }
#menu-canvas{ width:100%; height:100%; display:block;
/* ↓ ADD: let clicks pass through the background canvas */
  pointer-events:none;
}
#screen--menu .menu-contents{
  position:relative; z-index:2; max-width:900px; margin:2.5rem auto; padding:1.25rem 1.5rem;
  background:linear-gradient(180deg,rgba(10,16,28,.65),rgba(10,16,28,.35));
  border:1px solid #223154; border-radius:16px; box-shadow:0 8px 40px rgba(0,0,0,.35); backdrop-filter:blur(4px);
/* ↓ ADD (explicit): the panel should accept clicks */
  pointer-events:auto;
}
const c = document.getElementById("menu-canvas");
if (c) c.style.pointerEvents = "none";

#screen--menu .btn-row{ display:flex; gap:.6rem; flex-wrap:wrap; margin:.4rem 0 1rem; }
#screen--menu details.small summary{ cursor:pointer; }

/* Rig screen layout */
#screen--rig .rig-layout{
  --panel-w:0px; --panel-min:260px; --panel-max:60vw; --split-w:10px;
  display:grid; grid-template-columns:1fr var(--split-w) var(--panel-w); gap:.8rem; height:100%;
}
#screen--rig .rig-canvas-wrap{ position:relative; min-width:320px; height:100%; }

/* ADD: animation panel visibility + layout */
#anim-panel{
  display: none;                 /* hidden by default; shown when .anim-open is on */
  position: absolute;
  top: 8px; right: 8px; left: 8px;
  height: 50%;                   /* requested: reduce height by ~50% of view */
  max-height: 50vh;
  padding: 10px;
  overflow: auto;
  background: rgba(8,12,18,0.85);
  border: 1px solid #223154;
  border-radius: 10px;
  z-index: 5;                    /* above canvas/gizmos, below any modals */
}

/* when the screen has .anim-open, show the panel */
#screen--rig.anim-open #anim-panel{
  display: block;
}

#rig-canvas{ width:100%; height:100%; display:block; }
.rig-resizer, .rig-panel{ display:none; }

/* Toolbar on canvas */
.rig-toolbar{
  position:absolute; left:.6rem; top:.6rem; z-index:2; display:flex; flex-direction:column; gap:.4rem;
  background:#0f1a30cc; border:1px solid #27355e; border-radius:10px; padding:.45rem .55rem; backdrop-filter:blur(2px);
}
.rig-toolbar .btns{ display:flex; g

#hud-control-dock .hud-cosmetic-card {
  flex: 1 1 220px;
}

#hud-control-dock .cosmetic-test-row {
  display: flex;
  flex-wrap: wrap;
  gap: 0.35rem;
}

#hud-control-dock .hud-cosmetic-card button {
  flex: 1 1 120px;
}
